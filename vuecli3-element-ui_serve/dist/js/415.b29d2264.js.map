{"version":3,"file":"js/415.b29d2264.js","mappings":"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","sources":["webpack://vuecli2-element-ui/./src/views/users/Users.vue","webpack://vuecli2-element-ui/src/views/users/Users.vue","webpack://vuecli2-element-ui/./src/views/users/Users.vue?1503","webpack://vuecli2-element-ui/./src/views/users/Users.vue?c70b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"users\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":40}},[_c('el-col',{attrs:{\"span\":9}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUsers},model:{value:(_vm.paramsUser.query),callback:function ($$v) {_vm.$set(_vm.paramsUser, \"query\", $$v)},expression:\"paramsUser.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUsers},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogTableVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"data\":_vm.infoUser}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"名字\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":function($event){return _vm.userStateChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"content\":\"分配角色\",\"placement\":\"left\",\"effect\":\"light\"}},[_c('el-button',{attrs:{\"type\":\"info\",\"icon\":\"el-icon-setting\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.setRoles(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.paramsUser.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.paramsUser.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogTableVisible,\"width\":\"40%\"},on:{\"close\":_vm.addDialogClose,\"update:visible\":function($event){_vm.dialogTableVisible=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"4.6875rem\"}},[_c('el-form-item',{attrs:{\"label\":\"用户\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"show-password\":\"\"},model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogTableVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUsers}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.isShowEditDialog,\"width\":\"60%\"},on:{\"close\":_vm.editFormClose,\"update:visible\":function($event){_vm.isShowEditDialog=$event}}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.isShowEditDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRolesDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRolesDialogVisible=$event}}},[_c('div',[_c('p',[_vm._v(\"当前名字:\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前角色:\"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"分配的新角色列表: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRolesDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 用户管理 用户列表 -->\r\n  <div class=\"users\">\r\n    <!-- 面包屑导航栏 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片 -->\r\n    <el-card>\r\n      <!-- 搜索框 -->\r\n      <el-row :gutter=\"40\">\r\n        <el-col :span=\"9\">\r\n          <!-- 清空 请求数据  clearable 清空input内的数据   @clear=\"getUsers\" 内置的清空方法 在重新请求数据 -->\r\n          <el-input placeholder=\"请输入内容\" v-model=\"paramsUser.query\" clearable @clear=\"getUsers\">\r\n            <!-- 点击搜索数据 重新调用请求数据  根据后台携带的query参数查询 -->\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUsers\"></el-button>\r\n          </el-input>\r\n        </el-col> \r\n        <el-col :span=\"6\">\r\n          <el-button type=\"primary\" @click=\"dialogTableVisible = true\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!-- 表格 -->\r\n      <el-table stripe border :data=\"infoUser\" >\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"名字\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\" ></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\" ></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\" ></el-table-column>\r\n        <el-table-column label=\"状态\" >\r\n        <!-- 默认插槽  可以获取到infoUser里面的数据 -->\r\n        <template slot-scope=\"scope\">\r\n          <!-- 开关  修改开关数据 并且修改数据库的数据-->\r\n          <!-- {{scope.row}} -->\r\n          <el-switch v-model=\"scope.row.mg_state\" @change=\"userStateChange(scope.row)\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\r\n        </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" >\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"showEditDialog(scope.row.id)\" type=\"primary\" icon=\"el-icon-edit\" circle></el-button>\r\n            <el-button @click=\"removeUserById(scope.row.id)\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\r\n            <!-- Tooltip 文字提示 -->\r\n            <el-tooltip content=\"分配角色\" placement=\"left\" effect=\"light\">\r\n              <el-button type=\"info\" icon=\"el-icon-setting\" @click=\"setRoles(scope.row)\" circle></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 ¶Pagination  -->\r\n      <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"paramsUser.pagenum\"\r\n      :page-sizes=\"[1, 2, 5, 10]\"\r\n      :page-size=\"paramsUser.pagesize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    </el-card>\r\n      \r\n    <!-- 对话框(点击添加用户展示) close对话框关闭的回调 -->\r\n    <el-dialog title=\"添加用户\" @close=\"addDialogClose\" :visible.sync=\"dialogTableVisible\" width=\"40%\">\r\n      <!-- Form验证表单 -->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"4.6875rem\" >\r\n        <el-form-item label=\"用户\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>  \r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input  show-password v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>  \r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input  v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>  \r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input  v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>  \r\n      </el-form>\r\n      <span slot=\"footer\" >\r\n        <el-button @click=\"dialogTableVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUsers\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 对话框(点击操作里面的修改按钮 弹出对话框) -->\r\n    <el-dialog @close=\"editFormClose\" title=\"修改用户信息\" :visible.sync=\"isShowEditDialog\" width=\"60%\" >\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"100px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input> \r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input> \r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input> \r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"isShowEditDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 对话框(点击操作里面的分配角色按钮 弹出对话框) -->\r\n    <el-dialog title=\"分配角色\" :visible.sync=\"setRolesDialogVisible\" width=\"50%\" >\r\n      <div>\r\n        <p>当前名字:{{userInfo.username}}</p>\r\n        <p>当前角色:{{userInfo.role_name}}</p>\r\n        <p>分配的新角色列表:\r\n          <!-- Select 选择器 -->\r\n            <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in rolesList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.roleName\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n            </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"setRolesDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n   \r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    // 自定义邮箱的验证规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      // 验证正则表达式\r\n      const regEmail = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/\r\n      if (regEmail.test(value)) {\r\n        // 合法邮箱\r\n        return cb()\r\n      }\r\n      cb(new Error('输入合法邮箱'))\r\n    }\r\n    // 自定义手机号的验证规则\r\n    var checkPhone = (rule, value, cb) => {\r\n      const regPhone = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\r\n      if (regPhone.test(value)) {\r\n        // 合法邮箱\r\n        return cb()\r\n      }\r\n      cb(new Error('输入合法手机号'))\r\n    }\r\n    return {\r\n      // 请求用户列表数据 需要的参数(params)\r\n      paramsUser: {\r\n        query: '',\r\n        pagenum: 1,\r\n        pagesize: 2,\r\n      },\r\n      // 获取到的用户列表数据\r\n      infoUser: [],\r\n      // 一共有几条数据\r\n      total: 0,\r\n      // 是否显示对话框\r\n      dialogTableVisible: false,\r\n      // 是否显示 修改用户信息对话框\r\n      isShowEditDialog: false,\r\n      // 是否展示 删除个人信息对话框\r\n      isDangerEditDialog: false,\r\n      // 点击添加用户里面  添加的表单\r\n      addForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      // 根据id查询到的用户信息 操作点击修改按钮 \r\n      editForm: {},\r\n      \r\n      // 添加表单的验证规则  添加用户时 和el-form-item里面的props属性绑定\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: '输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '输入密码', trigger: 'blur' },\r\n          { min: 5, max: 15, message: '长度在 5 到 15 个字符', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: ['blur', 'change'] }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: checkPhone, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 表单验证规则  修改用户个人信息时\r\n      editFormRules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱地址', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: ['blur', 'change'] }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: checkPhone, trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 点击 分配角色 显示对话框\r\n      setRolesDialogVisible : false,\r\n      // 点击 分配角色 里面的用户信息\r\n      userInfo: '',\r\n      // 点击 分配角色 角色列表数据\r\n      rolesList: [],\r\n      // 点击 分配角色 角色列表  select 绑定的数据\r\n      selectedRoleId: ''\r\n      \r\n      \r\n    }\r\n  },\r\n  created() {\r\n    this.getUsers()\r\n  },\r\n  methods: {\r\n    // 获取用户列表  表格数据\r\n    async getUsers() {\r\n      const {data: res} = await this.$http.get('users', {\r\n        params: this.paramsUser\r\n      }) \r\n      console.log(res)\r\n      this.infoUser = res.data.users\r\n      this.total = res.data.total \r\n      console.log(this.infoUser)\r\n    },\r\n    // 每页条数    2条/页\r\n    handleSizeChange(newSize) {\r\n      console.log(newSize + '每页条数')\r\n      this.paramsUser.pagesize = newSize\r\n      // 切换每页条数后 重新发起请求\r\n      this.getUsers()\r\n    },\r\n    // 当前页       < 1 2 > 前往 1 页\r\n    handleCurrentChange(newPage) {\r\n      console.log(newPage + '有几页')\r\n      this.paramsUser.pagenum = newPage\r\n      // 切换有几页后 重新发起请求\r\n      this.getUsers()\r\n    },\r\n    // 点击开关 修改数据库里的状态  重新发送修改数据请求   形参\r\n    async userStateChange(infoUser) {\r\n      console.log(infoUser)\r\n      // 重新请求 修改用户状态的接口\r\n      const { data : res} = await this.$http.put(`users/${infoUser.id}/state/${infoUser.mg_state}`)\r\n      console.log(res)\r\n      if (res.meta.status !== 200) {\r\n        // 用户修改状态失败 重新把状态取反,使页面状态没有变化\r\n        infoUser.mg_state = !infoUser.mg_state\r\n        return this.$alert('fdads')\r\n      }\r\n      this.$notify.info(res.meta.msg + '修改用户状态成功了')\r\n    },\r\n\r\n    // 点击添加用户 重置表单内容\r\n    addDialogClose() {\r\n      // 根据ref获取到form表单 元素\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n    // 添加用户里面的确定 预验证form表单内容\r\n    addUsers() {\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        console.log(valid)\r\n        if (valid == false) {\r\n          return this.$notify.info('输入提示form表单内容')\r\n        }\r\n        // 输入表单内容正确 发起添加用户请求\r\n        const {data: res} = await this.$http.post('users', this.addForm)\r\n        console.log(res)\r\n        if(res.meta.status !== 201) return this.$message.error('添加用户失败')\r\n        this.$message.success(res.meta.msg + \"成功了\")\r\n        // 隐藏添加用户对话框\r\n        this.dialogTableVisible = false\r\n        // 重新获取数据\r\n        this.getUsers()\r\n      })\r\n    },\r\n\r\n    // 点击操作里面的 修改按钮 修改个人信息\r\n    async showEditDialog(id) {\r\n      // 获取请求 根据id获取用户数据 展示在修改用户信息对话框\r\n      const {data: res} = await this.$http.get('users/' + id)\r\n      console.log(res)\r\n      if (res.meta.status !== 200) return this.$message.error('获取用户信息失败')\r\n      this.$notify.info(res.meta.msg + '成功')\r\n      this.editForm = res.data\r\n      console.log(this.editForm)\r\n      console.log(this.infoUser)\r\n      this.isShowEditDialog = true\r\n    },\r\n    // 监听用户对话框关闭 重置表单信息  修改用户个人信息时\r\n    editFormClose() {\r\n      // 重置表单信息\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    // 点击操作修改按钮 确定 进行预验证\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        console.log(valid)\r\n        if (valid == false) return this.$message.info('验证未通过')\r\n        // this.$notify.success('验证通过')\r\n        // 验证通过后 发起请求\r\n        const {data: res} = await this.$http.put('users/' + this.editForm.id, {\r\n          email: this.editForm.email,\r\n          mobile: this.editForm.mobile\r\n        })\r\n        console.log(res)\r\n        if( res.meta.status !== 200) return this.$message.error('获取修改用户信息失败')\r\n        this.$notify.info(res.meta.msg)\r\n        // 关闭操作修改 对话框\r\n        this.isShowEditDialog = false\r\n        // 重新获取列表数据\r\n        this.editForm = res.data\r\n\r\n        this.getUsers()\r\n      })\r\n    },\r\n\r\n    // 点击操作里面的 删除按钮 根据id删除个人信息\r\n    async removeUserById(id) {\r\n      // 弹出对话框\r\n      this.isDangerEditDialog = true\r\n      // 弹框 询问用户是否删除\r\n      const confirmResult = await this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      // }).catch(err => {\r\n      //   return err\r\n      // })\r\n      }).catch(err => err)\r\n      console.log(confirmResult)\r\n      // 点击确认 返回 confirm\r\n      // 点击取消 返回 cancel\r\n      if (confirmResult !== 'confirm') return this.$notify.info('点击了取消')\r\n      this.$message.success('点击确认 删除成功了')\r\n      // 发送请求 进行删除用户信息\r\n      const {data: res} = await this.$http.delete('users/' + id)\r\n      console.log(res)\r\n      // 刷新用户列表\r\n      this.getUsers()\r\n      // 关闭 弹框\r\n      this.isDangerEditDialog = false\r\n    \r\n    },\r\n    // 点击分配角色 按钮\r\n    async setRoles(userInfo) {\r\n      this.userInfo = userInfo\r\n\r\n      // 请求数据 展示对话框之前 获取角色列表\r\n      const {data: res} = await this.$http.get('roles')\r\n      if (res.meta.status !== 200 ) return this.$message.error('获取角色列表失败')\r\n      this.rolesList = res.data\r\n\r\n      this.setRolesDialogVisible = true\r\n      console.log(userInfo)\r\n    },\r\n    // 点击分配角色 确定 添加新角色列表\r\n    async saveRoleInfo() {\r\n      const {data: res} = await this.$http.put(`users/${this.userInfo.id}/role`,{rid: this.selectedRoleId})\r\n      console.log(res)\r\n      if (res.meta.status !== 200) return this.$message.error('获取用户id失败')\r\n      this.$notify.success('更新角色成功了')\r\n      // 重新 更新列表数据\r\n      this.getUsers()\r\n      // 关闭分配角色对话框\r\n      this.setRolesDialogVisible = false\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\"> \r\n.users {\r\n  // font-size: 16px;\r\n  .el-card {\r\n    box-shadow: 0 0 9px 4px rgba(0,0,0,.3);\r\n    margin-top: 1rem;\r\n    .el-table {\r\n      margin-top: 1.5rem;\r\n      font-size: 14px;\r\n      :nth-child(1) {\r\n        text-align: center;\r\n      }\r\n    }\r\n    .el-pagination {\r\n      margin-top: 2rem;\r\n    }\r\n  }\r\n}\r\n\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=49488e9c&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=49488e9c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49488e9c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","path","_v","on","getUsers","model","value","paramsUser","query","callback","$$v","$set","expression","slot","$event","dialogTableVisible","infoUser","scopedSlots","_u","key","fn","scope","userStateChange","row","mg_state","showEditDialog","id","removeUserById","setRoles","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClose","ref","addForm","addFormRules","username","password","email","mobile","addUsers","isShowEditDialog","editFormClose","editForm","editFormRules","editUserInfo","setRolesDialogVisible","_s","userInfo","role_name","selectedRoleId","_l","rolesList","item","roleName","saveRoleInfo","staticRenderFns","data","cb","isDangerEditDialog","required","message","trigger","min","max","validator","created","methods","params","confirmButtonText","cancelButtonText","type","rid","component"],"sourceRoot":""}